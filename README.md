# Python_Learning

### 标准库

##### ctypes

语法：

- 编译: g++ tmp.cpp --shared -fPIC -o tmp.so
- 查看: nm tmp.so
- 加载：CDLL("./tmp.so")，注意"./"指定当前目录

个人理解: 

- 常用的**默认类型**有c_int，c_double，c_char_p（bytes类），c_wchar_p（str类）等。

- python3运行全程都是单线程，但调用C函数的时候会释放GIL，函数返回时重新获取GIL。
- 运行CDLL("./tmp.so")的时候会完成C进入main函数前的操作，比如全局变量的初始化，全局类的构造。
- 在当前python3解释器退出的时候（包括发生运行错误时），会完成离开main函数时的操作，比如类的析构。（例如cout析构刷新缓冲区）
- **ctypes只能逐单位填充，对于x64来说4字节一个单位。**（比如c_wchar_p生成的char数组强制四个字节表示一个utf-8字符的，但是c_char_p表示的ascii串则会依次填充，长度不为4的倍数则补0）返回utf-8的字符串必须讲每个字符强制填充成四字节。（一般没有这种需求吧，或者base64编码也成）
- 网上说ctypes创建的内存不能自动对齐，还未验证。

##### os

### 小知识

##### 下划线

\_var，from module import * 时不会被导入。(包括\_\_var,\_\_var\_\_都不会被导入)

class.\_\_var，会被解释器重命名为 class.\_class\_\_var。

##### 作用域

原则LEGB

- L （Local） 局部作用域
- E （Enclosing） 闭包函数外的函数中
- G （Global） 全局作用域
- B （Built-in） 内建作用域

查看内建函数，print(dir(__builtins__))。
使用global和nonlocal可以在内部作用域修改全局作用域或者闭包作用域。(个人不建议使用)

##### 参数

对象类型

- 可变对象：字典、列表、集合、自定义的对象
- 不可变对象：数字、字符串、元组、function

传可变对象等价于传引用，传不可变对象等价于传值。

参数类型

- 常用的：位置参数、默认参数
- 不常用：变长参数、关键字参数、命名关键字参数。(传元组、字典不香吗)

默认参数一定要写在位置参数后面，且值一定要为不可变对象。(因为默认对象只生成一次，函数可被调用多次)

##### 装饰器


